










<main class="main">
    

    <div class="content">



         <div class="row justify-content-center">
          <div class="col-md-6">
            
            <h2 class="text-center" id="editStat" style="display: none;">Edit Status</h2>
            <form
              action="/admin/postEditStat"
              method="POST"
              id="statEditForm"
              style="display: none;"
            >

              <label for="">Status</label>
              
              <input type="text" name="status" id="stat" class="form-control" value="" />
              <input type="text" id="orderId" name="orderId" style="display:none;" value="">
              
              <button type="submit"  id="editStatbutton"  class="btn btn-success mt-4">Edit</button>
            </form>
          </div>
        </div>
         

        
         <div class="py-4 ">
            <div class="card mb-3 mb-md-4">

                <div class="card-body">
                    <!-- Breadcrumb -->
                    <nav class="d-none d-md-block" aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="#">Users</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">All Users</li>
                        </ol>
                    </nav>
                    <!-- End Breadcrumb -->

                    <div class="mb-3 mb-md-4 d-flex justify-content-between">
                        <div class="h3 mb-0">Users</div>
                    </div>


                    <!-- Users -->
                    <div class="table-responsive-xl">
                        <style>
            table, th, td { border: 1px solid rgb(139, 130, 137); border-collapse: collapse; color: rgb(7, 6, 6);}
          </style>
                        <table class="table text-nowrap mb-0">
                            <thead>
                <tr>
                  <th>No.</th>
                  <th>User Email</th>
                  <th>Phone</th>
                  <th>Order id</th>
                  <th>Payment</th>
                  <th>Date</th>
                  <th>Status</th>
                  
                  <th>Edit</th>
                </tr>
              </thead>
              <tbody>
                {{#each orderData}}
                <tr>
                  <td>{{inc @index}}</td>
                  <td>{{this.userId.email}}</td>
                  <td>{{this.userId.phone}}</td>
                  <td>{{this._id}}</td>
                  <td>{{this.paymentMethod}}</td>
                  <td>{{formatString this.createdAt}}</td>
                  <td id="displayStatus">{{this.status}}</td>
                  
                  <td><a onclick="editStatus('{{this._id}}','{{this.status}}')" ><i class="gd-pencil icon-text"></i></a></td>

                </tr>
                {{/each}}
              </tbody>
                        </table>
                        <div class="card-footer d-block d-md-flex align-items-center d-print-none">
                            <div class="d-flex mb-2 mb-md-0">Showing 1 to 8 of 24 Entries</div>

                            <nav class="d-flex ml-md-auto d-print-none" aria-label="Pagination"><ul class="pagination justify-content-end font-weight-semi-bold mb-0">				<li class="page-item">				<a id="datatablePaginationPrev" class="page-link" href="#!" aria-label="Previous"><i class="gd-angle-left icon-text icon-text-xs d-inline-block"></i></a>				</li><li class="page-item d-none d-md-block"><a id="datatablePaginationPage0" class="page-link active" href="#!" data-dt-page-to="0">1</a></li><li class="page-item d-none d-md-block"><a id="datatablePagination1" class="page-link" href="#!" data-dt-page-to="1">2</a></li><li class="page-item d-none d-md-block"><a id="datatablePagination2" class="page-link" href="#!" data-dt-page-to="2">3</a></li><li class="page-item">				<a id="datatablePaginationNext" class="page-link" href="#!" aria-label="Next"><i class="gd-angle-right icon-text icon-text-xs d-inline-block"></i></a>				</li>				</ul></nav>
                        </div>
                    </div>
                    <!-- End Users -->
                </div>
            </div>


        </div>

     

        
    </div>
</main>



<script>

    function editStatus(orderId,status){
      
        
        document.getElementById('editStat').style.display = '';
        document.getElementById('statEditForm').style.display = '';
        document.getElementById('stat').value = status ;
        document.getElementById('orderId').value = orderId

        $('#editStatbutton').click(function(orderId){
          
           
           
          $.ajax({
            url:'/admin/postEditStat',
            method:'post',
            success:(response)=>{
                if(response.status){
                
                alert('status edited successfully')
                  
              
              location.reload()
            
         
            
                }
            }
          })
           
       

           
       })
    }
</script>